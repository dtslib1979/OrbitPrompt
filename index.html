<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OrbitPrompt - Mission Control | ÎØ∏ÏÖò Ïª®Ìä∏Î°§</title>
  <meta name="description" content="Î∞©ÏÜ°Ïö© Ïπ†Ìåê ÏãúÏä§ÌÖú. PWA ÌéòÏù¥ÏßÄÎ°ú ÌôîÎ©¥ ÎÖπÌôîÌïòÏó¨ YouTube ÏóÖÎ°úÎìú.">
  <meta name="description" lang="en" content="Broadcast chalkboard system. Screen record PWA pages and upload to YouTube.">
  <link rel="icon" href="assets/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="assets/orbitprompt-logo.png">
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0d1117">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="OrbitPrompt">
  <style>
    :root {
      --bg: #0d1117;
      --surface: #161b22;
      --surface-elevated: #1c2128;
      --border: #30363d;
      --text: #e6edf3;
      --text-muted: #8b949e;
      --accent: #58a6ff;
      --accent-glow: rgba(88, 166, 255, 0.15);
      --success: #3fb950;
      --warning: #d29922;
      --danger: #f85149;
      --gradient-start: #58a6ff;
      --gradient-end: #a371f7;
      --beat: 857ms;
      --half-beat: 428ms;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      min-height: 100dvh;
      padding: 20px;
      padding-bottom: env(safe-area-inset-bottom, 20px);
    }

    .container {
      max-width: 720px;
      margin: 0 auto;
    }

    /* Header */
    header {
      text-align: center;
      margin-bottom: 32px;
      padding-top: 20px;
    }

    .day-counter {
      font-size: clamp(3rem, 12vw, 5rem);
      font-weight: 800;
      background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      line-height: 1.1;
    }

    .day-label {
      color: var(--text-muted);
      font-size: 0.875rem;
      margin-top: 8px;
      letter-spacing: 0.5px;
    }

    .streak-bar {
      display: flex;
      justify-content: center;
      gap: 4px;
      margin-top: 16px;
    }

    .streak-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--border);
    }

    .streak-dot.completed {
      background: var(--success);
    }

    .streak-dot.today {
      background: var(--accent);
      box-shadow: 0 0 8px var(--accent);
      animation: pulse-dot 2s infinite;
    }

    @keyframes pulse-dot {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.3); opacity: 0.8; }
    }

    /* Cards */
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 16px;
    }

    .card-header {
      font-size: 0.75rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 16px;
      font-weight: 600;
    }

    /* Board Selector */
    .board-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    .board-option {
      background: var(--bg);
      border: 2px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: left;
      -webkit-tap-highlight-color: transparent;
    }

    .board-option:hover {
      border-color: var(--text-muted);
      background: var(--surface-elevated);
    }

    .board-option:active {
      transform: scale(0.98);
    }

    .board-option.selected {
      border-color: var(--accent);
      background: var(--accent-glow);
    }

    .board-icon {
      font-size: 1.75rem;
      margin-bottom: 8px;
    }

    .board-name {
      font-weight: 600;
      font-size: 0.9375rem;
      margin-bottom: 4px;
    }

    .board-format {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    /* Topic Input */
    .topic-section {
      margin-top: 20px;
    }

    .topic-label {
      display: block;
      font-size: 0.8125rem;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .topic-input {
      width: 100%;
      padding: 14px 16px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 10px;
      color: var(--text);
      font-size: 1rem;
      transition: border-color 0.2s;
    }

    .topic-input:focus {
      outline: none;
      border-color: var(--accent);
    }

    .topic-input::placeholder {
      color: var(--text-muted);
    }

    /* Launch Button */
    .launch-btn {
      width: 100%;
      padding: 18px 24px;
      background: linear-gradient(135deg, var(--danger), #da3633);
      border: none;
      border-radius: 14px;
      color: white;
      font-size: 1.125rem;
      font-weight: 700;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      transition: transform 0.15s, box-shadow 0.15s;
      margin-top: 24px;
      -webkit-tap-highlight-color: transparent;
    }

    .launch-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(248, 81, 73, 0.35);
    }

    .launch-btn:active {
      transform: translateY(0) scale(0.98);
    }

    .rec-indicator {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .rec-dot {
      width: 10px;
      height: 10px;
      background: white;
      border-radius: 50%;
      animation: blink 1.5s infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.4; }
    }

    /* Studio Status */
    .studio-grid {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }

    .studio-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.8125rem;
    }

    .studio-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--text-muted);
      transition: background 0.3s;
    }

    .studio-dot.connected {
      background: var(--success);
    }

    .studio-dot.failed {
      background: var(--danger);
    }

    .studio-dot.loading {
      animation: pulse-load 1s infinite;
    }

    @keyframes pulse-load {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 1; }
    }

    /* Quick Links */
    .quick-links {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .quick-link {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 10px 16px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      text-decoration: none;
      font-size: 0.875rem;
      font-weight: 500;
      transition: all 0.2s;
    }

    .quick-link:hover {
      border-color: var(--accent);
      background: var(--surface-elevated);
    }

    .quick-link svg {
      width: 16px;
      height: 16px;
    }

    /* Footer */
    footer {
      text-align: center;
      margin-top: 40px;
      padding-bottom: 20px;
    }

    .footer-tagline {
      color: var(--text-muted);
      font-size: 0.8125rem;
      margin-bottom: 8px;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 16px;
    }

    .footer-links a {
      color: var(--accent);
      text-decoration: none;
      font-size: 0.8125rem;
    }

    .footer-links a:hover {
      text-decoration: underline;
    }

    /* Philosophy Modal */
    .philosophy-trigger {
      background: none;
      border: none;
      color: var(--accent);
      font-size: 0.8125rem;
      cursor: pointer;
      text-decoration: underline;
    }

    /* Responsive */
    @media (max-width: 480px) {
      body {
        padding: 16px;
      }

      .board-grid {
        grid-template-columns: 1fr;
      }

      .studio-grid {
        flex-direction: column;
        gap: 12px;
      }

      .quick-links {
        flex-direction: column;
      }

      .quick-link {
        justify-content: center;
      }
    }

    /* PWA Standalone */
    @media (display-mode: standalone) {
      body {
        padding-top: env(safe-area-inset-top, 20px);
      }

      header {
        padding-top: 0;
      }
    }

    /* Bilingual Support */
    .bilingual .ko { display: inline; }
    .bilingual .en { display: inline; font-size: 0.85em; color: var(--text-muted); margin-left: 0.5em; }
    .bilingual .en::before { content: '/ '; }
    [lang="en"] { font-style: normal; }

    .lang-toggle {
      position: fixed; top: 1rem; right: 1rem; z-index: 100;
      display: flex; gap: 4px; background: var(--surface); padding: 4px; border-radius: 6px;
      border: 1px solid var(--border);
    }
    .lang-btn {
      padding: 0.4rem 0.8rem; border: none; border-radius: 4px;
      font-size: 0.75rem; cursor: pointer; background: transparent; color: var(--text-muted);
    }
    .lang-btn.active { background: var(--accent); color: #000; }

    html.en-mode .bilingual .ko { font-size: 0.85em; color: var(--text-muted); }
    html.en-mode .bilingual .ko::after { content: ' /'; }
    html.en-mode .bilingual .en { font-size: 1em; color: var(--text); margin-left: 0; }
    html.en-mode .bilingual .en::before { content: ''; }
  </style>
</head>
<body>
  <!-- Language Toggle -->
  <div class="lang-toggle">
    <button class="lang-btn active" data-lang="ko" onclick="setLang('ko')">ÌïúÍµ≠Ïñ¥</button>
    <button class="lang-btn" data-lang="en" onclick="setLang('en')">EN</button>
  </div>

  <div class="container">
    <!-- Header: Day Counter -->
    <header>
      <div class="day-counter" id="dayCounter">Day 1</div>
      <div class="day-label bilingual">
        <span lang="ko" class="ko">100Ïùº Î∞©ÏÜ° Ï±åÎ¶∞ÏßÄ</span>
        <span lang="en" class="en">100-Day Broadcast Challenge</span>
      </div>
      <div class="streak-bar" id="streakBar">
        <!-- Generated by JS -->
      </div>
    </header>

    <!-- Today's Mission -->
    <div class="card">
      <div class="card-header bilingual">
        <span lang="ko" class="ko">Ïò§ÎäòÏùò Ïπ†Ìåê</span>
        <span lang="en" class="en">Today's Chalkboard</span>
      </div>

      <div class="board-grid" id="boardGrid">
        <div class="board-option selected" data-board="math-tutor">
          <div class="board-icon">üìê</div>
          <div class="board-name">Math Tutor</div>
          <div class="board-format">Khan Academy</div>
        </div>
        <div class="board-option" data-board="music-curation">
          <div class="board-icon">üéµ</div>
          <div class="board-name">Music Curation</div>
          <div class="board-format">NPR Tiny Desk</div>
        </div>
        <div class="board-option" data-board="memorial-tribute">
          <div class="board-icon">üé¨</div>
          <div class="board-name">Memorial</div>
          <div class="board-format">Ken Burns</div>
        </div>
        <div class="board-option" data-board="pwa-demo">
          <div class="board-icon">üì±</div>
          <div class="board-name">PWA Demo</div>
          <div class="board-format">Apple Keynote</div>
        </div>
      </div>

      <div class="topic-section">
        <label class="topic-label bilingual" for="topicInput">
          <span lang="ko" class="ko">Ïò§ÎäòÏùò Ï£ºÏ†ú</span>
          <span lang="en" class="en">Today's Topic</span>
        </label>
        <input
          type="text"
          id="topicInput"
          class="topic-input"
          placeholder="Í∑ºÏùò Í≥µÏãù / Beatles Î∂ÑÏÑù / etc..."
        >
      </div>

      <button class="launch-btn" id="launchBtn">
        <span class="rec-indicator">
          <span class="rec-dot"></span>
          REC
        </span>
        <span class="bilingual">
          <span lang="ko" class="ko">Ïπ†Ìåê Ïó¥Í∏∞</span>
          <span lang="en" class="en">Open Chalkboard</span>
        </span>
      </button>
    </div>

    <!-- Studio Connection -->
    <div class="card">
      <div class="card-header bilingual">
        <span lang="ko" class="ko">Ïä§ÌäúÎîîÏò§ Ïó∞Í≤∞</span>
        <span lang="en" class="en">Studio Connection</span>
      </div>
      <div class="studio-grid" id="studioGrid">
        <div class="studio-item">
          <span class="studio-dot loading" id="dot-image"></span>
          <span>parksy-image</span>
        </div>
        <div class="studio-item">
          <span class="studio-dot loading" id="dot-audio"></span>
          <span>parksy-audio</span>
        </div>
        <div class="studio-item">
          <span class="studio-dot loading" id="dot-experience"></span>
          <span>tango-magenta</span>
        </div>
      </div>
    </div>

    <!-- Quick Links -->
    <div class="card">
      <div class="card-header bilingual">
        <span lang="ko" class="ko">Îπ†Î•∏ Ï†ëÍ∑º</span>
        <span lang="en" class="en">Quick Access</span>
      </div>
      <div class="quick-links">
        <a href="archive.html" class="quick-link">
          <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
          </svg>
          <span class="bilingual">
            <span lang="ko" class="ko">ÌîÑÎ°¨ÌîÑÌä∏ ÏïÑÏπ¥Ïù¥Î∏å</span>
            <span lang="en" class="en">Archive</span>
          </span>
        </a>
        <a href="prompts/engine/Gitgub-publishing.html" class="quick-link">
          <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
            <circle cx="12" cy="12" r="3"/>
          </svg>
          <span class="bilingual">
            <span lang="ko" class="ko">ÌîÑÎ°¨ÌîÑÌä∏ ÏóîÏßÑ</span>
            <span lang="en" class="en">Engine</span>
          </span>
        </a>
        <a href="https://github.com/dtslib1979/OrbitPrompt" class="quick-link" target="_blank">
          <svg fill="currentColor" viewBox="0 0 16 16">
            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0016 8c0-4.42-3.58-8-8-8z"/>
          </svg>
          GitHub
        </a>
        <a href="docs/branch-guide.html" class="quick-link">
          <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
          </svg>
          <span class="bilingual">
            <span lang="ko" class="ko">Î∏åÎûúÏπò Í∞ÄÏù¥Îìú</span>
            <span lang="en" class="en">Branch Guide</span>
          </span>
        </a>
      </div>
    </div>

    <!-- Footer -->
    <footer>
      <p class="footer-tagline bilingual">
        <span lang="ko" class="ko">Ï°¥Ïû¨ = ÏÉùÏÇ∞</span>
        <span lang="en" class="en">Existence = Production</span>
      </p>
      <div class="footer-links">
        <button class="philosophy-trigger" id="philosophyBtn">
          <span class="bilingual">
            <span lang="ko" class="ko">Parksy OS Ï≤†Ìïô</span>
            <span lang="en" class="en">Philosophy</span>
          </span>
        </button>
      </div>
    </footer>
  </div>

  <script src="scripts/asset-loader.js"></script>
  <script>
    // === Language Toggle ===
    let currentLang = localStorage.getItem('orbitprompt_lang') || 'ko';

    function setLang(lang) {
      currentLang = lang;
      localStorage.setItem('orbitprompt_lang', lang);
      document.documentElement.classList.toggle('en-mode', lang === 'en');
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
      });
    }

    // Initialize language on load
    document.documentElement.classList.toggle('en-mode', currentLang === 'en');
    document.querySelectorAll('.lang-btn').forEach(btn => {
      btn.classList.toggle('active', btn.dataset.lang === currentLang);
    });
  </script>
  <script>
    // === Configuration ===
    const START_DATE = '2026-01-25';
    const STORAGE_KEY = 'orbitprompt_streak';

    // === Day Counter ===
    function calculateDay() {
      const start = new Date(START_DATE);
      start.setHours(0, 0, 0, 0);
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      const diff = Math.floor((today - start) / (1000 * 60 * 60 * 24));
      return Math.max(1, diff + 1);
    }

    const currentDay = calculateDay();
    document.getElementById('dayCounter').textContent = `Day ${currentDay}`;

    // === Streak Bar (last 7 days) ===
    function renderStreakBar() {
      const bar = document.getElementById('streakBar');
      const streak = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');

      bar.innerHTML = '';
      for (let i = 6; i >= 0; i--) {
        const dayNum = currentDay - i;
        if (dayNum < 1) continue;

        const dot = document.createElement('div');
        dot.className = 'streak-dot';

        if (i === 0) {
          dot.classList.add('today');
        } else if (streak.includes(dayNum)) {
          dot.classList.add('completed');
        }

        bar.appendChild(dot);
      }
    }
    renderStreakBar();

    // === Board Selector ===
    let selectedBoard = 'math-tutor';

    document.querySelectorAll('.board-option').forEach(option => {
      option.addEventListener('click', () => {
        document.querySelectorAll('.board-option').forEach(o => o.classList.remove('selected'));
        option.classList.add('selected');
        selectedBoard = option.dataset.board;
      });
    });

    // === Launch Button ===
    document.getElementById('launchBtn').addEventListener('click', () => {
      const topic = document.getElementById('topicInput').value.trim();
      let url = `prompts/broadcast/${selectedBoard}.html`;

      const params = new URLSearchParams();
      if (topic) params.set('topic', topic);
      params.set('day', currentDay);

      if (params.toString()) {
        url += `?${params.toString()}`;
      }

      // Record streak
      const streak = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
      if (!streak.includes(currentDay)) {
        streak.push(currentDay);
        localStorage.setItem(STORAGE_KEY, JSON.stringify(streak));
      }

      // Open in new tab for recording
      window.open(url, '_blank');
    });

    // === Studio Connection Status ===
    async function checkStudioConnections() {
      const dots = {
        image: document.getElementById('dot-image'),
        audio: document.getElementById('dot-audio'),
        experience: document.getElementById('dot-experience')
      };

      try {
        await AssetLoader.init();
        const status = AssetLoader.getStatus();

        for (const [type, info] of Object.entries(status.studios)) {
          const dot = dots[type];
          if (dot) {
            dot.classList.remove('loading');
            dot.classList.toggle('connected', info.connected);
            dot.classList.toggle('failed', !info.connected);
          }
        }

        // Apply design tokens if available
        const timing = AssetLoader.getDesignTokens('timing');
        if (timing?.beat) {
          document.documentElement.style.setProperty('--beat', timing.beat + 'ms');
          document.documentElement.style.setProperty('--half-beat', timing.halfBeat + 'ms');
        }
      } catch (e) {
        console.warn('Studio connection failed:', e.message);
        Object.values(dots).forEach(dot => {
          dot.classList.remove('loading');
          dot.classList.add('failed');
        });
      }
    }

    // Check connections after short delay
    setTimeout(checkStudioConnections, 500);

    // === Philosophy Modal (simple alert for now) ===
    document.getElementById('philosophyBtn').addEventListener('click', () => {
      alert(
        'Parksy OS Philosophy\n\n' +
        'Í∏∞Ï°¥ ÏÇ¨Í≥† ‚Üí Parksy OS\n' +
        '"ÏòÅÏÉÅ Ï∞çÏñ¥ÏïºÏßÄ" ‚Üí ÏõπÌéòÏù¥ÏßÄ Ïó¥Î©¥ Í∑∏Í≤å Î∞©ÏÜ°\n' +
        '"Ìé∏ÏßëÌï¥ÏïºÏßÄ" ‚Üí ÌôîÎ©¥ ÎÖπÌôî = ÏôÑÏÑ±Î¨º\n' +
        '"ÏûòÌï¥ÏïºÏßÄ" ‚Üí Í≥ÑÏÜç Ïò¨Î¶¨Î©¥ ÎÇ¥Í∞Ä Î∞îÎÄú\n' +
        '"Ïñ∏Ï††Í∞Ä" ‚Üí Ïò§Îäò ÌïòÎÇòÍ∞Ä Í∏∞Î≥∏Í∞í\n\n' +
        'ÌïµÏã¨: ÏΩîÏπ≠Ïù¥ ÏïÑÎãàÎùº Ï°¥Ïû¨ Î∞©Ïãù Ïû¨ÏÑ§Í≥Ñ.'
      );
    });

    // === PWA Install Prompt ===
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
    });
  </script>
</body>
</html>
