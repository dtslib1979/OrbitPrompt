<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0a0a0a">
  <title>Identity Engine â€” OrbitPrompt</title>
  <link rel="icon" href="../../assets/icon.svg" type="image/svg+xml">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-void: #050505;
      --bg-primary: #0a0a0a;
      --bg-surface: #0f0f0f;
      --bg-card: #141414;
      --bg-input: #1a1a1a;
      --text-primary: #f0f0f0;
      --text-secondary: rgba(255,255,255,0.7);
      --text-muted: rgba(255,255,255,0.4);
      --accent: #a855f7;
      --accent-dim: rgba(168,85,247,0.15);
      --gold: #d4af37;
      --gold-dim: rgba(212,175,55,0.15);
      --cyan: #22d3ee;
      --cyan-dim: rgba(34,211,238,0.15);
      --border: rgba(255,255,255,0.08);
      --font-sans: 'Inter', -apple-system, sans-serif;
      --font-mono: 'JetBrains Mono', monospace;
    }
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: var(--font-sans);
      background: var(--bg-void);
      color: var(--text-primary);
      min-height: 100vh;
      padding: 1.5rem;
      line-height: 1.6;
    }
    .container { max-width: 640px; margin: 0 auto; }

    header {
      text-align: center;
      padding: 1.5rem 0 2rem;
      border-bottom: 1px solid var(--border);
      margin-bottom: 2rem;
    }
    .tag {
      font-family: var(--font-mono);
      font-size: 0.5625rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--accent);
      background: var(--accent-dim);
      padding: 0.25rem 0.5rem;
      display: inline-block;
      margin-bottom: 0.75rem;
    }
    h1 {
      font-family: var(--font-mono);
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    .subtitle {
      font-size: 0.8125rem;
      color: var(--text-muted);
    }

    .section {
      background: var(--bg-card);
      border: 1px solid var(--border);
      padding: 1.25rem;
      margin-bottom: 1rem;
    }
    .section-title {
      font-family: var(--font-mono);
      font-size: 0.6875rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 1rem;
    }

    label {
      display: block;
      font-size: 0.75rem;
      color: var(--text-secondary);
      margin-bottom: 0.375rem;
    }
    input, select, textarea {
      width: 100%;
      padding: 0.625rem 0.75rem;
      background: var(--bg-input);
      border: 1px solid var(--border);
      color: var(--text-primary);
      font-family: inherit;
      font-size: 0.8125rem;
      margin-bottom: 1rem;
    }
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: var(--accent);
    }
    textarea { resize: vertical; min-height: 160px; font-family: var(--font-mono); font-size: 0.75rem; }

    /* 7-Axis Grid */
    .axes-grid {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    .axis-row {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem;
      background: var(--bg-input);
      border: 1px solid var(--border);
      transition: border-color 0.15s;
    }
    .axis-row.active { border-color: var(--accent); }
    .axis-icon { font-size: 1.125rem; width: 1.5rem; text-align: center; flex-shrink: 0; }
    .axis-info { flex: 1; min-width: 0; }
    .axis-name {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      font-weight: 600;
    }
    .axis-desc { font-size: 0.625rem; color: var(--text-muted); }
    .axis-controls { display: flex; align-items: center; gap: 0.5rem; flex-shrink: 0; }

    /* Depth Selector */
    .depth-select {
      font-family: var(--font-mono);
      font-size: 0.5625rem;
      padding: 0.25rem 0.375rem;
      background: var(--bg-surface);
      border: 1px solid var(--border);
      color: var(--text-muted);
      cursor: pointer;
      width: auto;
      margin-bottom: 0;
    }
    .depth-select:focus { border-color: var(--accent); }

    /* Toggle */
    .toggle-switch {
      width: 36px;
      height: 20px;
      background: var(--border);
      border-radius: 10px;
      position: relative;
      cursor: pointer;
      transition: background 0.2s;
      flex-shrink: 0;
    }
    .toggle-switch.active { background: var(--accent); }
    .toggle-switch::after {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      width: 16px;
      height: 16px;
      background: #fff;
      border-radius: 50%;
      transition: transform 0.2s;
    }
    .toggle-switch.active::after { transform: translateX(16px); }

    /* Spiral Section */
    .spiral-note {
      display: flex;
      align-items: flex-start;
      gap: 0.5rem;
      padding: 0.75rem;
      background: var(--cyan-dim);
      border-left: 3px solid var(--cyan);
      margin-bottom: 1rem;
      font-size: 0.75rem;
      color: var(--text-secondary);
    }
    .spiral-note-icon { font-size: 1rem; }

    /* Buttons */
    .btn {
      padding: 0.75rem 1.25rem;
      border: none;
      font-family: inherit;
      font-size: 0.75rem;
      font-weight: 500;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.15s;
    }
    .btn-primary {
      background: var(--accent);
      color: #fff;
      width: 100%;
    }
    .btn-primary:hover { filter: brightness(1.15); }
    .btn-secondary {
      background: transparent;
      border: 1px solid var(--border);
      color: var(--text-secondary);
    }
    .btn-secondary:hover { border-color: var(--accent); color: var(--accent); }

    /* Output */
    .output-section {
      background: var(--bg-card);
      border: 2px solid var(--accent);
      display: none;
      margin-top: 1.5rem;
    }
    .output-header {
      background: var(--accent-dim);
      padding: 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid var(--accent);
    }
    .output-title {
      font-size: 0.75rem;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--accent);
    }
    .output-body { padding: 1.25rem; }
    .output-prompt {
      background: var(--bg-input);
      border: 1px solid var(--border);
      padding: 1rem;
      font-family: var(--font-mono);
      font-size: 0.75rem;
      line-height: 1.7;
      color: var(--text-secondary);
      white-space: pre-wrap;
      max-height: 500px;
      overflow-y: auto;
    }
    .philosophy-note {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      margin-top: 1rem;
      padding: 1rem;
      background: var(--accent-dim);
      border-left: 3px solid var(--accent);
    }
    .philosophy-icon { font-size: 1.25rem; }
    .philosophy-note p { font-size: 0.8125rem; line-height: 1.6; color: var(--text-secondary); }
    .philosophy-note strong { color: var(--accent); }
    .btn-row { display: flex; gap: 0.75rem; margin-top: 1.5rem; }
    .btn-full { flex: 1; }

    /* Schema Preview */
    .schema-preview {
      background: var(--bg-surface);
      border: 1px solid var(--border);
      padding: 0.75rem;
      margin-top: 1rem;
      font-family: var(--font-mono);
      font-size: 0.625rem;
      color: var(--text-muted);
      max-height: 200px;
      overflow-y: auto;
    }

    footer {
      text-align: center;
      padding: 2rem 0 1rem;
      border-top: 1px solid var(--border);
      margin-top: 2rem;
    }
    .footer-link {
      font-family: var(--font-mono);
      font-size: 0.625rem;
      color: var(--text-muted);
      text-decoration: none;
    }
    .footer-link:hover { color: var(--accent); }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <span class="tag">Prompt Engine</span>
      <h1>Identity Engine</h1>
      <p class="subtitle">ëŒ€í™” ë¡œê·¸ â†’ 7ì¶• íŒŒì‹± â†’ ìê¸° ëª¨ë¸ ì¶”ì¶œ</p>
    </header>

    <!-- 7-Axis Configuration -->
    <div class="section">
      <p class="section-title">7-Axis Framework</p>
      <div class="axes-grid" id="axesGrid">
        <div class="axis-row active" data-axis="meta">
          <span class="axis-icon">ğŸª</span>
          <div class="axis-info">
            <div class="axis-name">Meta</div>
            <div class="axis-desc">ìƒê°í•˜ëŠ” ë°©ì‹ ìì²´ë¥¼ ì¶”ì¶œ. ë©”íƒ€ì¸ì§€ ìˆœê°„ ê°ì§€.</div>
          </div>
          <div class="axis-controls">
            <select class="depth-select" data-axis="meta">
              <option value="surface">í‘œë©´</option>
              <option value="deep" selected>ì‹¬ì¸µ</option>
              <option value="exhaustive">ì „ìˆ˜</option>
            </select>
            <div class="toggle-switch active" data-axis="meta"></div>
          </div>
        </div>
        <div class="axis-row active" data-axis="reverse">
          <span class="axis-icon">ğŸ”„</span>
          <div class="axis-info">
            <div class="axis-name">Reverse</div>
            <div class="axis-desc">ê²°ë¡ ì—ì„œ ì „ì œë¥¼ ì—­ì¶”ì . ìˆ¨ê²¨ì§„ ê°€ì • ë°œêµ´.</div>
          </div>
          <div class="axis-controls">
            <select class="depth-select" data-axis="reverse">
              <option value="surface">í‘œë©´</option>
              <option value="deep" selected>ì‹¬ì¸µ</option>
              <option value="exhaustive">ì „ìˆ˜</option>
            </select>
            <div class="toggle-switch active" data-axis="reverse"></div>
          </div>
        </div>
        <div class="axis-row active" data-axis="modular">
          <span class="axis-icon">ğŸ§©</span>
          <div class="axis-info">
            <div class="axis-name">Modular</div>
            <div class="axis-desc">ë°˜ë³µ ì‚¬ê³  íŒ¨í„´ì„ ëª¨ë“ˆë¡œ ë¶„ë¦¬. ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì‚¬ê³  ë‹¨ìœ„.</div>
          </div>
          <div class="axis-controls">
            <select class="depth-select" data-axis="modular">
              <option value="surface">í‘œë©´</option>
              <option value="deep" selected>ì‹¬ì¸µ</option>
              <option value="exhaustive">ì „ìˆ˜</option>
            </select>
            <div class="toggle-switch active" data-axis="modular"></div>
          </div>
        </div>
        <div class="axis-row active" data-axis="language">
          <span class="axis-icon">ğŸ—£ï¸</span>
          <div class="axis-info">
            <div class="axis-name">Language</div>
            <div class="axis-desc">ë¹„ìœ , ì–¸ì–´ êµ¬ì¡°, í‘œí˜„ ìŠµê´€ í¬ì°©. ê³ ìœ  ì–´ì¡° ì¶”ì¶œ.</div>
          </div>
          <div class="axis-controls">
            <select class="depth-select" data-axis="language">
              <option value="surface">í‘œë©´</option>
              <option value="deep" selected>ì‹¬ì¸µ</option>
              <option value="exhaustive">ì „ìˆ˜</option>
            </select>
            <div class="toggle-switch active" data-axis="language"></div>
          </div>
        </div>
        <div class="axis-row active" data-axis="zoom">
          <span class="axis-icon">ğŸ”¬</span>
          <div class="axis-info">
            <div class="axis-name">Zoom</div>
            <div class="axis-desc">ë¯¸ì‹œâ†”ê±°ì‹œ ìŠ¤ì¼€ì¼ ì „í™˜ ê°ì§€. ì¶”ìƒí™” ë ˆë²¨ ë³€ë™.</div>
          </div>
          <div class="axis-controls">
            <select class="depth-select" data-axis="zoom">
              <option value="surface">í‘œë©´</option>
              <option value="deep" selected>ì‹¬ì¸µ</option>
              <option value="exhaustive">ì „ìˆ˜</option>
            </select>
            <div class="toggle-switch active" data-axis="zoom"></div>
          </div>
        </div>
        <div class="axis-row active" data-axis="spiral">
          <span class="axis-icon">ğŸŒ€</span>
          <div class="axis-info">
            <div class="axis-name">Spiral</div>
            <div class="axis-desc">ì´ì „ ëŒ€í™”ì™€ ë¹„êµ. ì„±ì¥ ê¶¤ì  ì¶”ì . ë°˜ë³µ ì† ì§„í™”.</div>
          </div>
          <div class="axis-controls">
            <select class="depth-select" data-axis="spiral">
              <option value="surface">í‘œë©´</option>
              <option value="deep" selected>ì‹¬ì¸µ</option>
              <option value="exhaustive">ì „ìˆ˜</option>
            </select>
            <div class="toggle-switch active" data-axis="spiral"></div>
          </div>
        </div>
        <div class="axis-row active" data-axis="quantum">
          <span class="axis-icon">âš¡</span>
          <div class="axis-info">
            <div class="axis-name">Quantum</div>
            <div class="axis-desc">ì°¨ì› ì „í™˜ ìˆœê°„ ê°ì§€. íŒ¨ëŸ¬ë‹¤ì„ ì‹œí”„íŠ¸, ë¹„ì•½ì  ë„ì•½.</div>
          </div>
          <div class="axis-controls">
            <select class="depth-select" data-axis="quantum">
              <option value="surface">í‘œë©´</option>
              <option value="deep" selected>ì‹¬ì¸µ</option>
              <option value="exhaustive">ì „ìˆ˜</option>
            </select>
            <div class="toggle-switch active" data-axis="quantum"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Source Conversation Log -->
    <div class="section">
      <p class="section-title">ì›ì¬ë£Œ â€” ëŒ€í™” ë¡œê·¸</p>
      <label>ëŒ€í™” ë¡œê·¸ ë¶™ì—¬ë„£ê¸°</label>
      <textarea id="sourceLog" placeholder="Human: ì´ êµ¬ì¡°ê°€ ë§ëŠ” ì´ìœ ë¥¼ ì„¤ëª…í•˜ë©´...
Assistant: ë„¤, ì´ êµ¬ì¡°ëŠ”...
Human: ì•„ ê·¸ê²Œ ì•„ë‹ˆê³ , ì§„ì§œ ì˜ë„ëŠ”...

ëŒ€í™” ì „ì²´ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”. ê¸¸ìˆ˜ë¡ ì •ë°€í•œ ëª¨ë¸ì´ ì¶”ì¶œë©ë‹ˆë‹¤."></textarea>
      <label>ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ (ì„ íƒ)</label>
      <input type="text" id="context" placeholder="ì˜ˆ: Claude Code ì„¸ì…˜, ë ˆí¬ ì•„í‚¤í…ì²˜ ë…¼ì˜, ì² í•™ ì •ë¦¬">
    </div>

    <!-- Previous Model (Spiral) -->
    <div class="section">
      <p class="section-title">Spiral â€” ì´ì „ ìê¸° ëª¨ë¸ (ì„ íƒ)</p>
      <div class="spiral-note">
        <span class="spiral-note-icon">ğŸŒ€</span>
        <span>ì´ì „ì— ì¶”ì¶œí•œ ìê¸° ëª¨ë¸ JSONì„ ë¶™ì—¬ë„£ìœ¼ë©´ Spiral ì¶•ì´ ì„±ì¥ ê¶¤ì ì„ ë¹„êµí•©ë‹ˆë‹¤. ì²« ì‹¤í–‰ì´ë©´ ë¹„ì›Œë‘ì„¸ìš”.</span>
      </div>
      <textarea id="previousModel" style="min-height: 100px;" placeholder='ì´ì „ identity-model JSONì„ ë¶™ì—¬ë„£ê¸° (ì„ íƒ)'></textarea>
    </div>

    <!-- Output Options -->
    <div class="section">
      <p class="section-title">ì¶œë ¥ ì„¤ì •</p>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
        <div>
          <label>ì¶œë ¥ í˜•ì‹</label>
          <select id="outputFormat">
            <option value="json">JSON (ìê¸° ëª¨ë¸)</option>
            <option value="json+narrative">JSON + ì„œì‚¬ ìš”ì•½</option>
            <option value="narrative">ì„œì‚¬ ì „ìš© (ì½ê¸°ìš©)</option>
          </select>
        </div>
        <div>
          <label>ì¶”ì¶œ ëŒ€ìƒ</label>
          <select id="extractTarget">
            <option value="full">ì „ì²´ ì •ì²´ì„±</option>
            <option value="thinker">ì‚¬ê³ ì (Thinker)</option>
            <option value="builder">êµ¬ì¶•ì (Builder)</option>
            <option value="philosopher">ì² í•™ì (Philosopher)</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Generate -->
    <button class="btn btn-primary" onclick="generatePrompt()">ìê¸° ëª¨ë¸ ì¶”ì¶œ í”„ë¡¬í”„íŠ¸ ìƒì„±</button>

    <!-- Output -->
    <div class="section output-section" id="outputSection">
      <div class="output-header">
        <span class="output-title">ìƒì„±ëœ í”„ë¡¬í”„íŠ¸</span>
        <button class="btn btn-secondary" onclick="copyPrompt()">ë³µì‚¬</button>
      </div>
      <div class="output-body">
        <div class="output-prompt" id="outputPrompt"></div>

        <div class="philosophy-note">
          <span class="philosophy-icon">ğŸª</span>
          <p>ì´ í”„ë¡¬í”„íŠ¸ëŠ” ëŒ€í™” ë¡œê·¸ì—ì„œ <strong>"ë‚˜"ë¥¼ ì¶”ì¶œ</strong>í•©ë‹ˆë‹¤.<br>
          LLMì„ íŒŒì¸íŠœë‹í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼ <strong>"ë‚˜"ë¥¼ íŒŒì¸íŠœë‹</strong>í•˜ëŠ” ê²ë‹ˆë‹¤.<br>
          ë§¤ ì‹¤í–‰ë§ˆë‹¤ í•´ìƒë„ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤.</p>
        </div>

        <details style="margin-top: 1rem;">
          <summary style="font-family: var(--font-mono); font-size: 0.6875rem; color: var(--text-muted); cursor: pointer;">
            ì¶œë ¥ ìŠ¤í‚¤ë§ˆ ë¯¸ë¦¬ë³´ê¸°
          </summary>
          <div class="schema-preview" id="schemaPreview"></div>
        </details>

        <div class="btn-row">
          <button class="btn btn-primary btn-full" onclick="openClaude()">Claudeì—ì„œ ì—´ê¸° â†’</button>
        </div>
      </div>
    </div>

    <footer>
      <a href="../../index.html" class="footer-link">â† OrbitPrompt</a>
    </footer>
  </div>

  <script>
    const AXES = {
      meta: {
        name: 'Meta',
        icon: 'ğŸª',
        question: 'ì´ ëŒ€í™”ì—ì„œ í™”ìê°€ ìê¸° ì‚¬ê³  ê³¼ì • ìì²´ë¥¼ ì¸ì‹í•˜ê±°ë‚˜ ì–¸ê¸‰í•˜ëŠ” ìˆœê°„ì€?',
        deep: 'ë©”íƒ€ì¸ì§€ê°€ ë°œë™í•œ ì •í™•í•œ ì§€ì , ìê¸° ì°¸ì¡°ì  ë°œì–¸, "ì´ê±¸ ì™œ ì´ë ‡ê²Œ ìƒê°í•˜ì§€?"ë¥˜ì˜ ìˆœê°„ì„ ì „ë¶€ ì¶”ì¶œí•˜ë¼.',
        exhaustive: 'ëª¨ë“  ë©”íƒ€ì¸ì§€ì  ë°œí™”ë¥¼ ì‹œê°„ìˆœìœ¼ë¡œ ë‚˜ì—´í•˜ê³ , ê°ê°ì˜ íŠ¸ë¦¬ê±°(ë¬´ì—‡ì´ ë©”íƒ€ì¸ì§€ë¥¼ ìœ ë°œí–ˆëŠ”ì§€)ê¹Œì§€ ë¶„ì„í•˜ë¼.'
      },
      reverse: {
        name: 'Reverse',
        icon: 'ğŸ”„',
        question: 'ê²°ë¡ ì´ë‚˜ ì£¼ì¥ì—ì„œ ì—­ì¶”ì í•˜ë©´ ì–´ë–¤ ìˆ¨ê²¨ì§„ ì „ì œ/ê°€ì •ì´ ë“œëŸ¬ë‚˜ëŠ”ê°€?',
        deep: 'í™”ìê°€ ëª…ì‹œí•˜ì§€ ì•Šì€ ì „ì œë“¤ì„ ë°œêµ´í•˜ë¼. "ì´ ê²°ë¡ ì´ ì„±ë¦½í•˜ë ¤ë©´ Xë¥¼ ë‹¹ì—°ì‹œí•´ì•¼ í•œë‹¤"ë¥¼ ì „ë¶€ ì°¾ì•„ë¼.',
        exhaustive: 'ëª¨ë“  ì£¼ì¥-ì „ì œ ìŒì„ ì—­ì¶”ì í•˜ê³ , ì „ì œë“¤ ì‚¬ì´ì˜ ì˜ì¡´ ê´€ê³„ì™€ ëª¨ìˆœë„ ë¶„ì„í•˜ë¼.'
      },
      modular: {
        name: 'Modular',
        icon: 'ğŸ§©',
        question: 'ë°˜ë³µì ìœ¼ë¡œ ë“±ì¥í•˜ëŠ” ì‚¬ê³  íŒ¨í„´ì´ë‚˜ ë…¼ì¦ êµ¬ì¡°ëŠ”?',
        deep: 'ê°™ì€ ë…¼ì¦ í‹€, ê°™ì€ ë¹„êµ ë°©ì‹, ê°™ì€ ê²°ë¡  ë„ì¶œ íŒ¨í„´ì´ ë°˜ë³µë˜ëŠ” ê²ƒì„ ëª¨ë“ˆë¡œ ë¶„ë¦¬í•˜ë¼.',
        exhaustive: 'ëª¨ë“  ë°˜ë³µ íŒ¨í„´ì„ ëª…ëª…í•˜ê³ , ê° íŒ¨í„´ì˜ ì¶œí˜„ ë¹ˆë„, ë³€í˜•, ì§„í™” ê³¼ì •ì„ ê¸°ë¡í•˜ë¼.'
      },
      language: {
        name: 'Language',
        icon: 'ğŸ—£ï¸',
        question: 'í™”ì ê³ ìœ ì˜ ë¹„ìœ , ì–¸ì–´ êµ¬ì¡°, í‘œí˜„ ìŠµê´€ì€?',
        deep: 'ê³ ìœ  ë¹„ìœ  ì²´ê³„(ê³µì¥, ì†Œì„¤, ë°˜ë„ì²´ ë“±), ë§íˆ¬ íŒ¨í„´, ì½”ë“œìŠ¤ìœ„ì¹­, ê°ì • í‘œí˜„ ë°©ì‹ì„ ì¶”ì¶œí•˜ë¼.',
        exhaustive: 'ëª¨ë“  ë¹„ìœ ë¥¼ ë¶„ë¥˜í•˜ê³ , ë¹„ìœ  ê°„ ì²´ê³„ ê´€ê³„(ìƒìœ„/í•˜ìœ„ ë¹„ìœ ), ë¹„ìœ ì˜ ì§„í™”, ìƒˆë¡œ ë“±ì¥í•œ í‘œí˜„ì„ ì „ìˆ˜ ì¡°ì‚¬í•˜ë¼.'
      },
      zoom: {
        name: 'Zoom',
        icon: 'ğŸ”¬',
        question: 'ë¯¸ì‹œì  ë””í…Œì¼ê³¼ ê±°ì‹œì  ë¹„ì „ ì‚¬ì´ë¥¼ ì „í™˜í•˜ëŠ” íŒ¨í„´ì€?',
        deep: 'êµ¬ì²´ì  ì½”ë“œ/íŒŒì¼ì—ì„œ ê°‘ìê¸° ì² í•™/ë¹„ì „ìœ¼ë¡œ ì í”„í•˜ê±°ë‚˜ ê·¸ ì—­ë°©í–¥ ì „í™˜ì„ ê°ì§€í•˜ë¼. ì „í™˜ íŠ¸ë¦¬ê±°ë„ ë¶„ì„.',
        exhaustive: 'ëª¨ë“  ìŠ¤ì¼€ì¼ ì „í™˜ ì§€ì ì„ ì‹œê°„ìˆœ ë‚˜ì—´í•˜ê³ , ì „í™˜ íŒ¨í„´(ìƒí–¥/í•˜í–¥/ì™•ë³µ)ê³¼ ì „í™˜ ë¹ˆë„ë¥¼ ì •ëŸ‰ ë¶„ì„í•˜ë¼.'
      },
      spiral: {
        name: 'Spiral',
        icon: 'ğŸŒ€',
        question: 'ì´ì „ ëŒ€í™”/ëª¨ë¸ ëŒ€ë¹„ ì–´ë–¤ ì„±ì¥, ì‹¬í™”, ë³€í™”ê°€ ìˆëŠ”ê°€?',
        deep: 'ê°™ì€ ì£¼ì œë¥¼ ë‹¤ì‹œ ë‹¤ë£¨ë©´ì„œ ë” ê¹Šì–´ì§„ ë¶€ë¶„, ì´ì „ì— ì—†ë˜ ê´€ì , ìˆ˜ì •ëœ ìƒê°ì„ ë¹„êµ ì¶”ì¶œí•˜ë¼.',
        exhaustive: 'ì´ì „ ëª¨ë¸ì˜ ëª¨ë“  í•­ëª©ê³¼ 1:1 ëŒ€ì¡°í•˜ê³ , ì„±ì¥/í‡´í–‰/ì •ì²´ë¥¼ í•­ëª©ë³„ë¡œ íŒì •í•˜ë¼. ìƒˆë¡œ ì¶œí˜„í•œ ì¶•ë„ ê¸°ë¡.'
      },
      quantum: {
        name: 'Quantum',
        icon: 'âš¡',
        question: 'ì‚¬ê³ ì˜ ì°¨ì›ì´ ë°”ë€ŒëŠ” ìˆœê°„ â€” íŒ¨ëŸ¬ë‹¤ì„ ì‹œí”„íŠ¸, ë¹„ì•½ì  ë„ì•½ì€?',
        deep: 'ê¸°ì¡´ í”„ë ˆì„ ì•ˆì—ì„œ í•´ê²°í•˜ë‹¤ê°€ ê°‘ìê¸° í”„ë ˆì„ ìì²´ë¥¼ ë°”ê¾¸ëŠ” ìˆœê°„ì„ ì°¾ì•„ë¼. "ì•„ ê·¸ê²Œ ì•„ë‹ˆë¼..."ë¥˜ì˜ ì „í™˜.',
        exhaustive: 'ëª¨ë“  íŒ¨ëŸ¬ë‹¤ì„ ì „í™˜ì„ ì‹œê°„ìˆœ ë‚˜ì—´í•˜ê³ , ì „í™˜ ì „í›„ì˜ í”„ë ˆì„ì„ ë¹„êµí•˜ë©°, ì „í™˜ì„ ì´‰ë°œí•œ ê³„ê¸°ë¥¼ ë¶„ì„í•˜ë¼.'
      }
    };

    let state = {
      axes: {
        meta: { enabled: true, depth: 'deep' },
        reverse: { enabled: true, depth: 'deep' },
        modular: { enabled: true, depth: 'deep' },
        language: { enabled: true, depth: 'deep' },
        zoom: { enabled: true, depth: 'deep' },
        spiral: { enabled: true, depth: 'deep' },
        quantum: { enabled: true, depth: 'deep' }
      },
      sourceLog: '',
      context: '',
      previousModel: '',
      outputFormat: 'json',
      extractTarget: 'full'
    };

    // Toggle switches
    document.querySelectorAll('.toggle-switch').forEach(toggle => {
      toggle.addEventListener('click', () => {
        const axis = toggle.dataset.axis;
        toggle.classList.toggle('active');
        state.axes[axis].enabled = toggle.classList.contains('active');
        toggle.closest('.axis-row').classList.toggle('active', state.axes[axis].enabled);
      });
    });

    // Depth selectors
    document.querySelectorAll('.depth-select').forEach(select => {
      select.addEventListener('change', e => {
        state.axes[e.target.dataset.axis].depth = e.target.value;
      });
    });

    // Input bindings
    document.getElementById('sourceLog').addEventListener('input', e => state.sourceLog = e.target.value);
    document.getElementById('context').addEventListener('input', e => state.context = e.target.value);
    document.getElementById('previousModel').addEventListener('input', e => state.previousModel = e.target.value);
    document.getElementById('outputFormat').addEventListener('change', e => state.outputFormat = e.target.value);
    document.getElementById('extractTarget').addEventListener('change', e => state.extractTarget = e.target.value);

    const depthLabels = { surface: 'í‘œë©´ ìŠ¤ìº”', deep: 'ì‹¬ì¸µ ë¶„ì„', exhaustive: 'ì „ìˆ˜ ì¡°ì‚¬' };
    const targetLabels = { full: 'ì „ì²´ ì •ì²´ì„±', thinker: 'ì‚¬ê³ ì ê´€ì ', builder: 'êµ¬ì¶•ì ê´€ì ', philosopher: 'ì² í•™ì ê´€ì ' };
    const formatLabels = {
      json: 'identity-model JSON ìŠ¤í‚¤ë§ˆ',
      'json+narrative': 'JSON + í•œêµ­ì–´ ì„œì‚¬ ìš”ì•½',
      narrative: 'í•œêµ­ì–´ ì„œì‚¬ í˜•ì‹ (ì½ê¸°ìš©)'
    };

    function generatePrompt() {
      const enabledAxes = Object.entries(state.axes).filter(([, v]) => v.enabled);

      if (!state.sourceLog.trim()) {
        alert('ëŒ€í™” ë¡œê·¸ë¥¼ ë¶™ì—¬ë„£ì–´ ì£¼ì„¸ìš”.');
        return;
      }

      if (enabledAxes.length === 0) {
        alert('ìµœì†Œ 1ê°œ ì¶•ì„ í™œì„±í™”í•´ ì£¼ì„¸ìš”.');
        return;
      }

      const hasPrevious = state.previousModel.trim().length > 0;

      let axisInstructions = enabledAxes.map(([key, cfg]) => {
        const ax = AXES[key];
        let instruction = `### ${ax.icon} ${ax.name} ì¶•\n`;
        instruction += `**ì§ˆë¬¸**: ${ax.question}\n`;
        if (cfg.depth === 'deep') instruction += `**ì‹¬ì¸µ ì§€ì‹œ**: ${ax.deep}\n`;
        if (cfg.depth === 'exhaustive') instruction += `**ì „ìˆ˜ ì§€ì‹œ**: ${ax.exhaustive}\n`;
        return instruction;
      }).join('\n');

      let outputInstruction = '';
      if (state.outputFormat === 'json' || state.outputFormat === 'json+narrative') {
        outputInstruction = `## ì¶œë ¥ í˜•ì‹: identity-model JSON

ë‹¤ìŒ ìŠ¤í‚¤ë§ˆì— ë§ì¶° JSONì„ ì¶œë ¥í•˜ë¼:

\`\`\`json
{
  "schema": "identity-model",
  "version": "1.0",
  "extracted": "${new Date().toISOString().split('T')[0]}",
  "extract_target": "${state.extractTarget}",
  "axes": {
${enabledAxes.map(([key]) => `    "${key}": {
      "score": 0,
      "patterns": ["ë°œê²¬ëœ ì‚¬ê³  íŒ¨í„´"],
      "evidence": ["ëŒ€í™”ì—ì„œ ì§ì ‘ ì¸ìš© (ì›ë¬¸ ê·¸ëŒ€ë¡œ)"],
      "insight": "ì´ ì¶•ì—ì„œ ë°œê²¬í•œ í•µì‹¬ í†µì°° 1~3ë¬¸ì¥"
    }`).join(',\n')}
  },
  "identity": {
    "core_beliefs": ["í•µì‹¬ ì‹ ë…/ê°€ì¹˜ê´€"],
    "thinking_patterns": ["ë°˜ë³µë˜ëŠ” ì‚¬ê³  ë°©ì‹"],
    "recurring_metaphors": ["ìì£¼ ì“°ëŠ” ë¹„ìœ  ì²´ê³„"],
    "contradictions": ["ë‚´ì  ëª¨ìˆœì´ë‚˜ ê¸´ì¥"],
    "blind_spots": ["ë³´ì§€ ëª»í•˜ëŠ” ê²ƒ, íšŒí”¼í•˜ëŠ” ê²ƒ"],
    "growth_delta": ${hasPrevious ? '"ì´ì „ ëª¨ë¸ ëŒ€ë¹„ ë³€í™” ìš”ì•½"' : 'null'}
  }
}
\`\`\`

- score: 0~10 (í•´ë‹¹ ì¶•ì˜ í™œë™ ê°•ë„)
- evidence: ë°˜ë“œì‹œ ëŒ€í™” ì›ë¬¸ì—ì„œ ì§ì ‘ ì¸ìš©
- patterns: ì¶”ìƒí™”ëœ íŒ¨í„´ ì´ë¦„`;
      }

      if (state.outputFormat === 'json+narrative') {
        outputInstruction += `

JSON ì¶œë ¥ í›„, ë‹¤ìŒ í˜•ì‹ì˜ í•œêµ­ì–´ ì„œì‚¬ ìš”ì•½ì„ ì¶”ê°€í•˜ë¼:

---

## ì„œì‚¬ ìš”ì•½

ê° ì¶•ì—ì„œ ë°œê²¬í•œ ê²ƒì„ ìì—°ì–´ë¡œ ì •ë¦¬. "ì´ ì‚¬ëŒì€ ~í•˜ëŠ” ì‚¬ê³ ë¥¼ í•œë‹¤. íŠ¹íˆ ~í•  ë•Œ ~í•œ íŒ¨í„´ì´ ë‚˜íƒ€ë‚œë‹¤." í˜•íƒœ.`;
      }

      if (state.outputFormat === 'narrative') {
        outputInstruction = `## ì¶œë ¥ í˜•ì‹: ì„œì‚¬ (í•œêµ­ì–´)

êµ¬ì¡°í™”ëœ JSON ëŒ€ì‹ , ë‹¤ìŒ í˜•íƒœì˜ ìì—°ì–´ ë¶„ì„ì„ ì¶œë ¥í•˜ë¼:

### ì´ ì‚¬ëŒì˜ ì‚¬ê³  ì§€ë„

í™œì„±í™”ëœ ê° ì¶•ë³„ë¡œ 1~3 ë¬¸ë‹¨ì”©, ë°œê²¬í•œ íŒ¨í„´ê³¼ ì›ë¬¸ ì¸ìš©ì„ í¬í•¨í•˜ì—¬ ì„œìˆ .
ë§ˆì§€ë§‰ì— "ì •ì²´ì„± ìŠ¤ëƒ…ìƒ·" â€” í•µì‹¬ ì‹ ë…, ì‚¬ê³  ìŠµê´€, ê³ ìœ  ë¹„ìœ  ì²´ê³„ë¥¼ ìš”ì•½.`;
      }

      const prompt = `# ìê¸° ëª¨ë¸ ì¶”ì¶œ (Identity Extraction)

> ì´ í”„ë¡¬í”„íŠ¸ëŠ” ëŒ€í™” ë¡œê·¸ì—ì„œ í™”ìì˜ ì •ì²´ì„±ì„ ì¶”ì¶œí•˜ëŠ” ì—”ì§„ì´ë‹¤.
> LLMì„ íŒŒì¸íŠœë‹í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, "ë‚˜"ë¥¼ íŒŒì¸íŠœë‹í•˜ëŠ” ê²ƒì´ë‹¤.

## ì¶”ì¶œ ëŒ€ìƒ
- **ê´€ì **: ${targetLabels[state.extractTarget]}
- **í™œì„± ì¶•**: ${enabledAxes.length}/7
- **ì¶œë ¥**: ${formatLabels[state.outputFormat]}
${state.context ? `- **ëŒ€í™” ì»¨í…ìŠ¤íŠ¸**: ${state.context}` : ''}

---

## 7-Axis ë¶„ì„ í”„ë ˆì„ì›Œí¬

ì•„ë˜ í™œì„±í™”ëœ ì¶•ìœ¼ë¡œ ëŒ€í™” ë¡œê·¸ë¥¼ ë¶„ì„í•˜ë¼. ê° ì¶•ì€ ë…ë¦½ì  ë Œì¦ˆë‹¤.

${axisInstructions}
${hasPrevious ? `---

## Spiral ë¹„êµìš© â€” ì´ì „ ìê¸° ëª¨ë¸

ì•„ë˜ëŠ” ì´ì „ì— ì¶”ì¶œí•œ ìê¸° ëª¨ë¸ì´ë‹¤. Spiral ì¶• ë¶„ì„ ì‹œ ì´ê²ƒê³¼ ë¹„êµí•˜ë¼.

\`\`\`json
${state.previousModel}
\`\`\`
` : ''}
---

${outputInstruction}

---

## ë¶„ì„ ì›ì¹™

1. **ì¦ê±° ê¸°ë°˜**: ëª¨ë“  íŒ¨í„´/í†µì°°ì— ëŒ€í™” ì›ë¬¸ ì¸ìš© í•„ìˆ˜. ì¶”ì¸¡ ê¸ˆì§€.
2. **í™”ì êµ¬ë¶„**: Humanì˜ ë°œí™”ë§Œ ë¶„ì„. Assistant ë°œí™”ëŠ” ë§¥ë½ìœ¼ë¡œë§Œ ì°¸ê³ .
3. **ì •ì§í•œ ì ìˆ˜**: scoreëŠ” ì‹¤ì œ í™œë™ ê°•ë„ ë°˜ì˜. ì¦ê±° ì—†ìœ¼ë©´ 0.
4. **ëª¨ìˆœ í™˜ì˜**: ë‚´ì  ëª¨ìˆœì„ ë°œê²¬í•˜ë©´ ìˆ¨ê¸°ì§€ ë§ê³  contradictionsì— ê¸°ë¡.
5. **ë‚ ê²ƒ ë³´ì¡´**: í™”ìì˜ ë¹„ì†ì–´, ê°ì • í‘œí˜„, ì½”ë“œìŠ¤ìœ„ì¹­ ê·¸ëŒ€ë¡œ ì¸ìš©.

---

## ëŒ€í™” ë¡œê·¸ (ì›ì¬ë£Œ)

\`\`\`
${state.sourceLog}
\`\`\``;

      document.getElementById('outputPrompt').textContent = prompt;
      document.getElementById('outputSection').style.display = 'block';

      // Schema preview
      const schemaExample = JSON.stringify({
        schema: 'identity-model',
        version: '1.0',
        extracted: new Date().toISOString().split('T')[0],
        extract_target: state.extractTarget,
        axes: Object.fromEntries(enabledAxes.map(([key]) => [key, {
          score: '0~10',
          patterns: ['...'],
          evidence: ['ì›ë¬¸ ì¸ìš©'],
          insight: '...'
        }])),
        identity: {
          core_beliefs: ['...'],
          thinking_patterns: ['...'],
          recurring_metaphors: ['...'],
          contradictions: ['...'],
          blind_spots: ['...'],
          growth_delta: hasPrevious ? 'ì´ì „ ëŒ€ë¹„ ë³€í™”' : null
        }
      }, null, 2);
      document.getElementById('schemaPreview').textContent = schemaExample;
    }

    function copyPrompt() {
      navigator.clipboard.writeText(document.getElementById('outputPrompt').textContent);
    }

    function openClaude() {
      const text = encodeURIComponent(document.getElementById('outputPrompt').textContent);
      window.open(`https://claude.ai/new?q=${text}`, '_blank');
    }
  </script>
</body>
</html>
